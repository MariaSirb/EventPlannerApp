@page
@model EventPlannerApp.Pages.ContactModel
@{
    ViewData["Title"] = "Contact";
}

<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Form</title>
    <!--link-stylesheet----------->
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <!--using-fontAwesome------------>
    <script src="https://kit.fontawesome.com/c8e4d183c2.js" crossorigin="anonymous"></script>
</head>
<body>
    <!--contact-form-container------------------->
    <section id="contact">
        <!--socail----------->
        <div class="social">
            <!--icons--------->
            <a href="https://www.google.com/maps/d/viewer?mid=1IebEObFn7OscaZR7duxSuNZCmyk&hl=en&ll=46.772216878081785%2C23.582302999999982&z=14"><i class="bi bi-geo-alt"></i></a>
            <a href="tel:0756429081"><i class="bi bi-phone"></i></a>
            <a href="mailto:sirbmaria27@gmail.com"><i class="bi bi-envelope-at"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="bi bi-facebook"></i></a>
        </div>
        <!--contact-box------------->
        <div class="contact-box mt-4" style="width:600px;">
            <!--heading---------->
            <div class="c-heading" style="text-align:center;">
                <h1>Get In Touch</h1>
                <p style="text-align:center;">
                    We value your feedback. Feel free to contact us with any questions or concerns.
                </p>
            </div>
            <!--inputs------------------>
            <div class="c-inputs">
                <form action="https://api.web3forms.com/submit" method="POST" id="form">
                    <input type="hidden" name="access_key" value="04e8d13b-7f2a-4641-a3e6-8b490f4ef80f" />
                    <input type="hidden" name="subject" value="New Submission from Web3Forms" />
                    <input type="checkbox" name="botcheck" id="" style="display: none;" />

                    <div class="mb-6">
                        <label for="name" class="block mb-2 text-sm text-gray-600 dark:text-gray-400; text-align: left; text-decoration-underline">Full Name/Company name</label>
                        <br />
                        <input style="width:400px;height:50px; background-color:#57424f; color:#d8cfd4; opacity:0.8; " type="text" name="name" id="name" placeholder="Your full name" required />
                    </div>
                    <div class="mb-6">
                        <label for="email" class="block mb-2 text-sm text-gray-600 dark:text-gray-400; text-align: left; text-decoration-underline">Email Address</label>
                        <br />
                        <input style="width:400px; height:50px; background-color:#57424f; color:#d8cfd4;opacity:0.8;" type="email" name="email" id="email" placeholder="your email" required />
                    </div>
                    <div class="mb-6">
                        <label for="phone" class="text-sm text-gray-600 dark:text-gray-400; text-align: left; text-decoration-underline">Phone Number</label>
                        <br />
                        <input style="width:400px; height:50px; background-color:#57424f; color:#d8cfd4;opacity:0.8;" type="text" name="phone" id="phone" placeholder="Your phone number" required />
                    </div>
                    <div class="mb-6">
                        <label for="message" class="block mb-2 text-sm text-gray-600 dark:text-gray-400; text-align: left; text-decoration-underline">Your Message</label>
                        <br />
                        <textarea style="width:400px; background-color:#57424f; color:#d8cfd4;opacity:0.8;" rows="4" name="message" id="message" placeholder="Write Your Message" required></textarea>
                    </div>
                    <div class="mb-6">
                        <button type="submit" style="color:black;background-color:#644c5a; border-color:#7d5f71">
                            Send Message
                        </button>
                    </div>
                    <p class="text-base text-center text-gray-400" style="font-weight:bold; font-size:20px;" id="result"></p>
                </form>
            </div>

        </div>
        <!--map------------------->
        <div class="map">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2732.655843717301!2d23.62338601545408!3d46.77167977913816!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47490c6a98369865%3A0xe37d8af900151092!2sIulius%20Mall!5e0!3m2!1sro!2sro!4v1679579410473!5m2!1sro!2sro" width="600" height="450" frameborder="0" style="border:0;" allowfullscreen="" aria-hidden="false" tabindex="0"></iframe>
        </div>
    </section>
</body>
</html>


<script>
    const form = document.getElementById("form");
    const result = document.getElementById("result");

    form.addEventListener("submit", function (e) {
        const formData = new FormData(form);
        e.preventDefault();
        var object = {};
        formData.forEach((value, key) => {
            object[key] = value;
        });
        var json = JSON.stringify(object);
        result.innerHTML = "Please wait...";

        fetch("https://api.web3forms.com/submit", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                Accept: "application/json"
            },
            body: json
        })
            .then(async (response) => {
                let json = await response.json();
                if (response.status == 200) {
                    result.innerHTML = json.message;
                    result.classList.remove("text-gray-500");
                    result.classList.add("text-green-500");
                } else {
                    console.log(response);
                    result.innerHTML = json.message;
                    result.classList.remove("text-gray-500");
                    result.classList.add("text-red-500");
                }
            })
            .catch((error) => {
                console.log(error);
                result.innerHTML = "Something went wrong!";
            })
            .then(function () {
                form.reset();
                setTimeout(() => {
                    result.style.display = "none";
                }, 5000);
            });
    });

</script>
